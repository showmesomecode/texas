# 俱乐部 & 联盟

## 俱乐部

- 俱乐部由部长申请成立（花费钻石？），成立后可以添加成员
- 俱乐部成员角色 & 对应权限
  - 普通成员：加入俱乐部开的桌
  - 管理员：审批成员加入申请，踢人，开桌，审批俱乐部开桌的带入，加入俱乐部开的桌
  - 部长：所有管理员的权限，管理俱乐部成员角色变更（普通成员<->管理员），升级俱乐部为联盟等操作，与其他俱乐部or联盟合作or解除合作
- 玩家可以通过输入俱乐部ID查找俱乐部
  - 找到后，可以发起加入俱乐部申请
  - 部长和管理员都会收到申请，可以进行审批，通过或拒绝
- 俱乐部管理员和部长可以开桌
  - 开桌后，俱乐部成员可以看到并加入
  - 审核带入(德扑之星里有，沟通过)
    - 开桌时可以勾选审核带入(私局也可以，由开桌人审核)
    - 成员上桌时、买入时，部长及管理员会收到一条审核信息，可以通过或拒绝
      - 通过后，对应成员才可以上桌或买入
  - 每次开桌，可以设置本次开桌的抽水计算比例
    - 同一个账号记录一个上一次开桌设置的比例，下次开桌时默认先按照该比例设置
- 所有审核信息均是一次性的，即：针对某条申请有管理员操作过后，其它管理员无需也无法再进行操作

## 联盟

- 俱乐部花费一定的钻石(后台设置)可以升级为联盟(游戏内操作)，原俱乐部ID即为联盟ID
  - 联盟具备俱乐部的一切功能
- 别的俱乐部通过联盟ID，查找联盟，加入联盟，联盟会收到信息，管理员和盟主都可以审批
- 管理员和盟主在游戏里可以踢掉其它俱乐部
- 权限说明：
  - 联盟内部开桌、带入审批权限权限只有联盟盟主和联盟管理员才有
    - 其它俱乐部在加入某个联盟之后，本俱乐部的部长和管理员将不能开桌，没有带入审批权限
  - 与其他俱乐部or联盟合作or解除合作只有联盟盟主才有（只有独立的俱乐部或联盟才能决定合作）
    - 其它俱乐部在加入某个联盟之后，本俱乐部的部长和管理员将无法决定合作
  - 联盟盟主和联盟管理员相对于升级前的俱乐部部长和俱乐部管理员，增加了权限
    - 审批其它俱乐部加入
    - 踢掉其它俱乐部
    - 设置其它俱乐部的保险、抽水、返钻比例
- 联盟开的桌，联盟内成员及内部俱乐部内的成员都能看到并加入
  - 如果有“审核带入”则由联盟盟主以及联盟管理员审批
- 联盟的开桌，桌上玩家消耗的钻石返钻计算
  - 如果是联盟直接成员，则返钻按照运营后台针对该联盟设置的返钻比例进行返还
    - 假设联盟A的返钻比例是50%，A的成员a消耗了100钻，则返还50钻给联盟A
  - 如果是加盟的俱乐部的成员，则返钻按照运营后台针对该联盟设置的返钻比例进行返还，返还后，再根据联盟后台设置的该俱乐部的内部分配比例进行分配
    - 假设联盟A的返钻比例是50%，联盟内俱乐部B的内部比例是20%，B的成员b消耗了100钻，则返还30钻给联盟A，返还20钻给俱乐部B
- 联盟的开桌，桌上玩家的保险消耗分配，按照联盟后台设置比例分配
- 联盟的开桌，桌上玩家的抽水分配，按照联盟后台设置比例分配

## 合作

- 俱乐部/联盟之间的合作是一种平行的合作，合作后数据独立，结算独立
  - 抽水和保险具体数据有具体结算明细
  - 钻石消耗独立计算
- 合作后，俱乐部/联盟之间的开桌可以被合作关系内的俱乐部/联盟的成员看到并加入
  - 如果有“审核带入”则统一由开桌的俱乐部/联盟的管理员/创建者审核
- 独立的俱乐部以及联盟之间均可建立合作关系，俱乐部和联盟也能合作
  - 联盟底下的俱乐部，无法合作
- 可以多个合作，独立的多个联盟、俱乐部均可一起合作
- 游戏里输入俱乐部ID，查找到之后可以申请合作(部长、管理员)
  - 由对方(部长、管理员审核)
- 部长、管理员可以退出合作，直接退出，无需审批
  - 例如：ABCD合作，C退出，则C独立，ABD继续合作
- 合作关系建立后，双方所在合作关系合并
  - 例如：AB合作关系，CD合作关系，合作后，ABCD合作
- 有合作关系下，不能加入联盟
- 如果ABC合作，有桌在进行，C退出，之前的桌需要按照之前的情况正常结算

## 管理后台

### 运营角色

- 全局设置：建立俱乐部的钻石花费，俱乐部升级为联盟的钻石花费
- 可以通过ID查找俱乐部/联盟
  - 查找到后，可以设置该俱乐部/联盟的返钻比例（0~100）（返钻比例默认为0）
- 可以通过ID查找玩家信息
  - 找到具体玩家后，可以调整玩家的剩余钻石，需要保留操作记录
- 可以设置保险各个outs的中保概率
  - 默认为正常的概率

### 部长、盟主角色

- 俱乐部后台
  - 查操作记录
    - 创建俱乐部
    - 升级联盟
    - 添加、去除管理员记录
    - 审批加入记录
    - 踢人记录
    - 审批带入操作
- 联盟后台
  - 俱乐部后台的所有功能
  - 审批其它俱乐部加入记录
  - 踢掉其它俱乐部记录
  - 设置联盟内部俱乐部的返钻比例（需小于等于联盟自身反钻比例）
  - 设置联盟内部俱乐部和联盟的抽水、保险的分配比例
